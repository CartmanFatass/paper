2025-05-24 01:04:19,996 - [MainProcess] - Test-Training - INFO - 开始快速测试训练流程
2025-05-24 01:04:19,996 - [MainProcess] - Test-Training - INFO - 使用测试配置：总步数=10000, 评估间隔=1000
2025-05-24 01:04:20,019 - [MainProcess] - Test-Training - INFO - 检测到GPU可用，使用CUDA
2025-05-24 01:04:20,019 - [MainProcess] - Test-Training - INFO - 创建 2 个训练环境和 2 个评估环境
2025-05-24 01:04:20,019 - [MainProcess] - Test-Training - INFO - 创建向量化环境...
2025-05-24 01:04:24,170 - [MainProcess] - Test-Training - INFO - 从环境更新智能体数量: n_agents=3
2025-05-24 01:04:24,170 - [MainProcess] - Test-Training - INFO - 环境维度: state_dim=50, obs_dim=53
2025-05-24 01:04:24,170 - [MainProcess] - HMASD - INFO - 使用设备: cuda
2025-05-24 01:04:25,229 - [MainProcess] - Test-Training - INFO - 代理已创建
2025-05-24 01:04:25,229 - [MainProcess] - Test-Training - INFO - 重置环境...
2025-05-24 01:04:25,232 - [MainProcess] - Test-Training - INFO - 开始训练循环，目标步数：10000
2025-05-24 01:04:25,234 - [MainProcess] - HMASD - INFO - 初始化state_embedding: 实际状态维度 = 50
2025-05-24 01:04:25,234 - [MainProcess] - HMASD - INFO - 初始化obs_embedding: 实际观测维度 = 53
2025-05-24 01:04:25,565 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=1.3023, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:25,565 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=0, total_steps=0, 当前缓冲区大小: 1, 此环境累积奖励: 1.3023, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:25,573 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1705, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:25,573 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=0, total_steps=0, 当前缓冲区大小: 2, 此环境累积奖励: 1.1705, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:25,687 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8794, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:25,687 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=0, total_steps=0, 当前缓冲区大小: 3, 此环境累积奖励: 0.8794, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:25,697 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7830, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:25,697 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=0, total_steps=0, 当前缓冲区大小: 4, 此环境累积奖励: 0.7830, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:25,803 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8652, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:25,812 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=0, total_steps=0, 当前缓冲区大小: 5, 此环境累积奖励: 0.8652, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:25,812 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8602, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:25,812 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=0, total_steps=0, 当前缓冲区大小: 6, 此环境累积奖励: 0.8602, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:25,945 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8434, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:25,945 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=0, total_steps=0, 当前缓冲区大小: 7, 此环境累积奖励: 0.8434, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:25,952 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9929, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:25,952 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=0, total_steps=0, 当前缓冲区大小: 8, 此环境累积奖励: 0.9929, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,069 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9340, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,069 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=0, total_steps=0, 当前缓冲区大小: 9, 此环境累积奖励: 0.9340, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,069 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1059, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,069 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 10, 环境贡献: {0: 5, 1: 5}, 原因统计: {'技能周期结束': 10, '环境终止': 0}
2025-05-24 01:04:26,069 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=0, total_steps=0, 当前缓冲区大小: 10, 此环境累积奖励: 1.1059, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,186 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9679, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,186 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=0, total_steps=0, 当前缓冲区大小: 11, 此环境累积奖励: 0.9679, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,196 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.2366, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,196 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=0, total_steps=0, 当前缓冲区大小: 12, 此环境累积奖励: 1.2366, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,311 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9515, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,311 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=0, total_steps=0, 当前缓冲区大小: 13, 此环境累积奖励: 0.9515, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,313 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1214, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,313 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=0, total_steps=0, 当前缓冲区大小: 14, 此环境累积奖励: 1.1214, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,439 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9922, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,439 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=0, total_steps=0, 当前缓冲区大小: 15, 此环境累积奖励: 0.9922, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,439 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0928, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,439 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=0, total_steps=0, 当前缓冲区大小: 16, 此环境累积奖励: 1.0928, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,563 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9463, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,563 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=0, total_steps=0, 当前缓冲区大小: 17, 此环境累积奖励: 0.9463, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,568 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1008, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,568 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=0, total_steps=0, 当前缓冲区大小: 18, 此环境累积奖励: 1.1008, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,680 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9342, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,680 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=0, total_steps=0, 当前缓冲区大小: 19, 此环境累积奖励: 0.9342, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,687 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1248, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,687 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 20, 环境贡献: {0: 10, 1: 10}, 原因统计: {'技能周期结束': 20, '环境终止': 0}
2025-05-24 01:04:26,687 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=0, total_steps=0, 当前缓冲区大小: 20, 此环境累积奖励: 1.1248, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,803 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9782, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,803 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=0, total_steps=0, 当前缓冲区大小: 21, 此环境累积奖励: 0.9782, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,803 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1084, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,803 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=0, total_steps=0, 当前缓冲区大小: 22, 此环境累积奖励: 1.1084, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,921 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9888, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,921 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=0, total_steps=0, 当前缓冲区大小: 23, 此环境累积奖励: 0.9888, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:26,921 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.3324, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:26,921 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=0, total_steps=0, 当前缓冲区大小: 24, 此环境累积奖励: 1.3324, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,021 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 24/32 (当前/所需)
2025-05-24 01:04:27,021 - [MainProcess] - HMASD - WARNING - 高层缓冲区样本不足，需要32个样本，但只有24个。跳过更新。
2025-05-24 01:04:27,021 - [MainProcess] - HMASD - INFO - 初始化critic_mlp: 实际状态维度 = 50, 团队技能维度 = 2
2025-05-24 01:04:27,135 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8502, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:27,136 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 25, 此环境累积奖励: 0.8502, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,137 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.2984, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:27,137 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 26, 此环境累积奖励: 1.2984, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,253 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9464, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:27,253 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 27, 此环境累积奖励: 0.9464, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,262 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.3681, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:27,262 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 28, 此环境累积奖励: 1.3681, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,386 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=1.0073, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:27,386 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 29, 此环境累积奖励: 1.0073, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,387 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.3222, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:27,387 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 30, 环境贡献: {0: 15, 1: 15}, 原因统计: {'技能周期结束': 30, '环境终止': 0}
2025-05-24 01:04:27,387 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 30, 此环境累积奖励: 1.3222, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,522 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=1.2492, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:27,522 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 31, 此环境累积奖励: 1.2492, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,529 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.2590, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:27,529 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 32, 此环境累积奖励: 1.2590, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,646 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=1.2215, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:27,646 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 33, 此环境累积奖励: 1.2215, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,653 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.3084, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:27,653 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 34, 此环境累积奖励: 1.3084, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,770 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=1.2883, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:27,770 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 35, 此环境累积奖励: 1.2883, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,770 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.2738, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:27,770 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 36, 此环境累积奖励: 1.2738, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,896 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=1.1162, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:27,896 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 37, 此环境累积奖励: 1.1162, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:27,901 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.2368, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:27,902 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 38, 此环境累积奖励: 1.2368, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,019 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=1.0797, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:28,019 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 39, 此环境累积奖励: 1.0797, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,023 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.2115, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:28,023 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 40, 环境贡献: {0: 20, 1: 20}, 原因统计: {'技能周期结束': 40, '环境终止': 0}
2025-05-24 01:04:28,023 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 40, 此环境累积奖励: 1.2115, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,152 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9764, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:28,153 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 41, 此环境累积奖励: 0.9764, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,155 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.3233, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:28,155 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 42, 此环境累积奖励: 1.3233, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,280 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7902, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:28,280 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 43, 此环境累积奖励: 0.7902, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,284 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.3168, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:28,285 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 44, 此环境累积奖励: 1.3168, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,407 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8250, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:28,407 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 45, 此环境累积奖励: 0.8250, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,407 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1761, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:28,407 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 46, 此环境累积奖励: 1.1761, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,537 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6598, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:28,537 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 47, 此环境累积奖励: 0.6598, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,540 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1350, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:28,540 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 48, 此环境累积奖励: 1.1350, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,658 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6353, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:28,658 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=1, total_steps=1, 当前缓冲区大小: 49, 此环境累积奖励: 0.6353, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,668 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0078, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:28,668 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 50, 环境贡献: {0: 25, 1: 25}, 原因统计: {'技能周期结束': 50, '环境终止': 0}
2025-05-24 01:04:28,668 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=1, total_steps=1, 当前缓冲区大小: 50, 此环境累积奖励: 1.0078, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,723 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 50/32 (当前/所需)
2025-05-24 01:04:28,723 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从50个样本中采样32个
2025-05-24 01:04:28,723 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=1.0732, 标准差=0.1761, 最小值=0.7830, 最大值=1.3681
2025-05-24 01:04:28,723 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:04:28,723 - [MainProcess] - HMASD - INFO -   rewards: 均值=1.0732, 标准差=0.1761, 最小值=0.7830, 最大值=1.3681
2025-05-24 01:04:28,729 - [MainProcess] - HMASD - INFO -   state_values: 均值=0.8656, 标准差=0.2308, 最小值=0.3820, 最大值=1.1859
2025-05-24 01:04:28,733 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:04:28,733 - [MainProcess] - HMASD - INFO -   Advantages: 均值=9.9032, 标准差=4.4274, 最小值=0.3285, 最大值=15.3328
2025-05-24 01:04:28,734 - [MainProcess] - HMASD - INFO -   Returns: 均值=10.7688, 标准差=4.4350, 最小值=1.2883, 最大值=16.1152
2025-05-24 01:04:28,754 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6584
2025-05-24 01:04:28,759 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=251.223445, 策略损失=0.096709, 价值损失=251.128036, 熵损失=-0.001300
2025-05-24 01:04:28,787 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013ADBB7C9D0>
2025-05-24 01:04:28,789 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:04:28,819 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=272.942413, 均值=11.551528, 标准差=23.452639, 最大=145.100815, 最小=0.016252
2025-05-24 01:04:28,826 - [MainProcess] - HMASD - WARNING - 检测到30个参数具有较大梯度 (>10.0):
2025-05-24 01:04:28,826 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 38.888046
2025-05-24 01:04:28,826 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 52.160789
2025-05-24 01:04:28,826 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 24.605350
2025-05-24 01:04:28,826 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 59.209583
2025-05-24 01:04:28,828 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.bias: 梯度范数 = 10.450785
2025-05-24 01:04:28,828 - [MainProcess] - HMASD - WARNING -   ... 还有25个参数有较大梯度
2025-05-24 01:04:28,838 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.021161, 标准差=0.042963, 最大=0.265808, 最小=0.000030
2025-05-24 01:04:28,929 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6532, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:28,929 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 51, 此环境累积奖励: 0.6532, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:28,932 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1182, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:28,932 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 52, 此环境累积奖励: 1.1182, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,056 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7172, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,056 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 53, 此环境累积奖励: 0.7172, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,059 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9960, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,059 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 54, 此环境累积奖励: 0.9960, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,191 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7802, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,191 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 55, 此环境累积奖励: 0.7802, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,196 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0712, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,196 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 56, 此环境累积奖励: 1.0712, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,324 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7190, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,324 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 57, 此环境累积奖励: 0.7190, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,324 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0583, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,324 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 58, 此环境累积奖励: 1.0583, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,463 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6199, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,463 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 59, 此环境累积奖励: 0.6199, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,470 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0778, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,470 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 60, 环境贡献: {0: 30, 1: 30}, 原因统计: {'技能周期结束': 60, '环境终止': 0}
2025-05-24 01:04:29,470 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 60, 此环境累积奖励: 1.0778, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,599 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7485, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,599 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 61, 此环境累积奖励: 0.7485, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,602 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9996, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,603 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 62, 此环境累积奖励: 0.9996, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,740 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9290, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,740 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 63, 此环境累积奖励: 0.9290, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,751 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0723, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,752 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 64, 此环境累积奖励: 1.0723, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,896 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8201, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,896 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 65, 此环境累积奖励: 0.8201, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:29,904 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1127, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:29,904 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 66, 此环境累积奖励: 1.1127, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,030 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6321, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:30,030 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 67, 此环境累积奖励: 0.6321, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,033 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0174, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:30,033 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 68, 此环境累积奖励: 1.0174, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,156 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6528, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:30,156 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 69, 此环境累积奖励: 0.6528, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,163 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9751, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:30,163 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 70, 环境贡献: {0: 35, 1: 35}, 原因统计: {'技能周期结束': 70, '环境终止': 0}
2025-05-24 01:04:30,163 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 70, 此环境累积奖励: 0.9751, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,292 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6756, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:30,292 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 71, 此环境累积奖励: 0.6756, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,296 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9845, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:30,296 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 72, 此环境累积奖励: 0.9845, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,426 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5043, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:30,426 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 73, 此环境累积奖励: 0.5043, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,426 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0425, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:30,430 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 74, 此环境累积奖励: 1.0425, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,556 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6237, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:30,556 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=2, total_steps=2, 当前缓冲区大小: 75, 此环境累积奖励: 0.6237, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,562 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0497, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:30,562 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=2, total_steps=2, 当前缓冲区大小: 76, 此环境累积奖励: 1.0497, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,609 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 76/32 (当前/所需)
2025-05-24 01:04:30,609 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从76个样本中采样32个
2025-05-24 01:04:30,613 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=1.0359, 标准差=0.2133, 最小值=0.6199, 最大值=1.3681
2025-05-24 01:04:30,615 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:04:30,615 - [MainProcess] - HMASD - INFO -   rewards: 均值=1.0359, 标准差=0.2133, 最小值=0.6199, 最大值=1.3681
2025-05-24 01:04:30,615 - [MainProcess] - HMASD - INFO -   state_values: 均值=0.8935, 标准差=0.2086, 最小值=0.5780, 最大值=1.3155
2025-05-24 01:04:30,621 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:04:30,622 - [MainProcess] - HMASD - INFO -   Advantages: 均值=9.4964, 标准差=4.3478, 最小值=-0.1105, 最大值=14.9818
2025-05-24 01:04:30,622 - [MainProcess] - HMASD - INFO -   Returns: 均值=10.3899, 标准差=4.3004, 最小值=0.7802, 最大值=15.9222
2025-05-24 01:04:30,643 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6704
2025-05-24 01:04:30,645 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=232.460806, 策略损失=0.102759, 价值损失=232.359375, 熵损失=-0.001329
2025-05-24 01:04:30,674 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013ADBB7D3C0>
2025-05-24 01:04:30,677 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:04:30,703 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=261.202148, 均值=11.041051, 标准差=22.450545, 最大=140.099075, 最小=0.013654
2025-05-24 01:04:30,715 - [MainProcess] - HMASD - WARNING - 检测到26个参数具有较大梯度 (>10.0):
2025-05-24 01:04:30,718 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 36.608864
2025-05-24 01:04:30,718 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 49.392082
2025-05-24 01:04:30,718 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 22.591141
2025-05-24 01:04:30,718 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 54.703342
2025-05-24 01:04:30,718 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.norm1.bias: 梯度范数 = 10.028072
2025-05-24 01:04:30,718 - [MainProcess] - HMASD - WARNING -   ... 还有21个参数有较大梯度
2025-05-24 01:04:30,730 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.021135, 标准差=0.042975, 最大=0.268181, 最小=0.000026
2025-05-24 01:04:30,846 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6103, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:30,846 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 77, 此环境累积奖励: 0.6103, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,852 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0809, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:30,852 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 78, 此环境累积奖励: 1.0809, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,979 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7382, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:30,979 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 79, 此环境累积奖励: 0.7382, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:30,985 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1420, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:30,986 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 80, 环境贡献: {0: 40, 1: 40}, 原因统计: {'技能周期结束': 80, '环境终止': 0}
2025-05-24 01:04:30,986 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 80, 此环境累积奖励: 1.1420, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,113 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6176, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,113 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 81, 此环境累积奖励: 0.6176, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,123 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0847, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,123 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 82, 此环境累积奖励: 1.0847, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,257 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7535, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,257 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 83, 此环境累积奖励: 0.7535, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,257 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1423, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,257 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 84, 此环境累积奖励: 1.1423, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,387 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6803, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,387 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 85, 此环境累积奖励: 0.6803, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,396 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9959, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,396 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 86, 此环境累积奖励: 0.9959, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,536 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5506, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,537 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 87, 此环境累积奖励: 0.5506, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,542 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9051, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,542 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 88, 此环境累积奖励: 0.9051, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,686 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6512, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,686 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 89, 此环境累积奖励: 0.6512, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,686 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9420, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,686 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 90, 环境贡献: {0: 45, 1: 45}, 原因统计: {'技能周期结束': 90, '环境终止': 0}
2025-05-24 01:04:31,686 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 90, 此环境累积奖励: 0.9420, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,820 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5727, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,820 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 91, 此环境累积奖励: 0.5727, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,820 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8707, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,827 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 92, 此环境累积奖励: 0.8707, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,970 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6055, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,970 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 93, 此环境累积奖励: 0.6055, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:31,980 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7100, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:31,980 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 94, 此环境累积奖励: 0.7100, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:32,120 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6977, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:32,120 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 95, 此环境累积奖励: 0.6977, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:32,127 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7562, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:32,127 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 96, 此环境累积奖励: 0.7562, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:32,270 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7905, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:32,270 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 97, 此环境累积奖励: 0.7905, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:32,270 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8094, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:32,270 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 98, 此环境累积奖励: 0.8094, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:32,368 - [MainProcess] - Test-Training - INFO - 进度: 500/10000 步 (5.0%), 用时: 7.1s
2025-05-24 01:04:32,424 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7665, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:32,424 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 99, 此环境累积奖励: 0.7665, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:32,427 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.6331, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:32,427 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 100, 环境贡献: {0: 50, 1: 50}, 原因统计: {'技能周期结束': 100, '环境终止': 0}
2025-05-24 01:04:32,427 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 100, 此环境累积奖励: 0.6331, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:32,559 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5909, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:32,559 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=3, total_steps=3, 当前缓冲区大小: 101, 此环境累积奖励: 0.5909, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:32,563 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8138, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:32,563 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=3, total_steps=3, 当前缓冲区大小: 102, 此环境累积奖励: 0.8138, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:32,586 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 102/32 (当前/所需)
2025-05-24 01:04:32,586 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从102个样本中采样32个
2025-05-24 01:04:32,593 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=0.9296, 标准差=0.2284, 最小值=0.5043, 最大值=1.3233
2025-05-24 01:04:32,595 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:04:32,595 - [MainProcess] - HMASD - INFO -   rewards: 均值=0.9296, 标准差=0.2284, 最小值=0.5043, 最大值=1.3233
2025-05-24 01:04:32,595 - [MainProcess] - HMASD - INFO -   state_values: 均值=0.9375, 标准差=0.2175, 最小值=0.5991, 最大值=1.4345
2025-05-24 01:04:32,599 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:04:32,599 - [MainProcess] - HMASD - INFO -   Advantages: 均值=8.3884, 标准差=3.7758, 最小值=0.4928, 最大值=13.3404
2025-05-24 01:04:32,601 - [MainProcess] - HMASD - INFO -   Returns: 均值=9.3259, 标准差=3.7341, 最小值=1.1423, 最大值=14.2802
2025-05-24 01:04:32,623 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6813
2025-05-24 01:04:32,627 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=181.903427, 策略损失=0.098039, 价值损失=181.806732, 熵损失=-0.001344
2025-05-24 01:04:32,653 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013ADBB7C9D0>
2025-05-24 01:04:32,661 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:04:32,690 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=234.416229, 均值=9.874102, 标准差=20.165309, 最大=123.948326, 最小=0.009108
2025-05-24 01:04:32,703 - [MainProcess] - HMASD - WARNING - 检测到23个参数具有较大梯度 (>10.0):
2025-05-24 01:04:32,703 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 33.048561
2025-05-24 01:04:32,703 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 43.740131
2025-05-24 01:04:32,703 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 20.764439
2025-05-24 01:04:32,703 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 49.295425
2025-05-24 01:04:32,703 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.1.self_attn.in_proj_weight: 梯度范数 = 26.649717
2025-05-24 01:04:32,707 - [MainProcess] - HMASD - WARNING -   ... 还有18个参数有较大梯度
2025-05-24 01:04:32,718 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.021061, 标准差=0.043012, 最大=0.264377, 最小=0.000019
2025-05-24 01:04:32,868 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6232, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:32,869 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 103, 此环境累积奖励: 0.6232, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:32,876 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.6846, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:32,876 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 104, 此环境累积奖励: 0.6846, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,004 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5796, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,004 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 105, 此环境累积奖励: 0.5796, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,014 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.6451, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,014 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 106, 此环境累积奖励: 0.6451, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,163 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5372, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,163 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 107, 此环境累积奖励: 0.5372, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,169 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.6994, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,169 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 108, 此环境累积奖励: 0.6994, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,313 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6714, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,313 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 109, 此环境累积奖励: 0.6714, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,313 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7314, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,313 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 110, 环境贡献: {0: 55, 1: 55}, 原因统计: {'技能周期结束': 110, '环境终止': 0}
2025-05-24 01:04:33,313 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 110, 此环境累积奖励: 0.7314, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,455 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7357, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,455 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 111, 此环境累积奖励: 0.7357, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,463 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7150, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,463 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 112, 此环境累积奖励: 0.7150, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,603 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7503, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,603 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 113, 此环境累积奖励: 0.7503, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,603 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.6363, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,603 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 114, 此环境累积奖励: 0.6363, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,753 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5795, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,753 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 115, 此环境累积奖励: 0.5795, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,753 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.6545, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,753 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 116, 此环境累积奖励: 0.6545, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,924 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6696, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,924 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 117, 此环境累积奖励: 0.6696, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:33,929 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.6535, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:33,929 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 118, 此环境累积奖励: 0.6535, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:34,074 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6399, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:34,074 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 119, 此环境累积奖励: 0.6399, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:34,078 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8084, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:34,078 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 120, 环境贡献: {0: 60, 1: 60}, 原因统计: {'技能周期结束': 120, '环境终止': 0}
2025-05-24 01:04:34,079 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 120, 此环境累积奖励: 0.8084, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:34,219 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6550, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:34,219 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 121, 此环境累积奖励: 0.6550, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:34,219 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7568, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:34,219 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 122, 此环境累积奖励: 0.7568, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:34,370 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8351, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:34,370 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 123, 此环境累积奖励: 0.8351, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:34,375 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8137, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:34,375 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 124, 此环境累积奖励: 0.8137, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:34,520 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6005, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:34,520 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 125, 此环境累积奖励: 0.6005, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:34,530 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7122, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:34,530 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 126, 此环境累积奖励: 0.7122, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:34,670 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7091, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:34,670 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=4, total_steps=4, 当前缓冲区大小: 127, 此环境累积奖励: 0.7091, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:34,680 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7421, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:34,680 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=4, total_steps=4, 当前缓冲区大小: 128, 此环境累积奖励: 0.7421, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:34,688 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 128/32 (当前/所需)
2025-05-24 01:04:34,688 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从128个样本中采样32个
2025-05-24 01:04:34,689 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=0.9001, 标准差=0.1976, 最小值=0.5506, 最大值=1.3168
2025-05-24 01:04:34,692 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:04:34,692 - [MainProcess] - HMASD - INFO -   rewards: 均值=0.9001, 标准差=0.1976, 最小值=0.5506, 最大值=1.3168
2025-05-24 01:04:34,692 - [MainProcess] - HMASD - INFO -   state_values: 均值=1.0375, 标准差=0.1900, 最小值=0.5736, 最大值=1.3997
2025-05-24 01:04:34,697 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:04:34,697 - [MainProcess] - HMASD - INFO -   Advantages: 均值=8.0606, 标准差=3.7190, 最小值=0.3325, 最大值=12.9591
2025-05-24 01:04:34,697 - [MainProcess] - HMASD - INFO -   Returns: 均值=9.0981, 标准差=3.7223, 最小值=1.1423, 最大值=13.9528
2025-05-24 01:04:34,721 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6819
2025-05-24 01:04:34,723 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=171.031702, 策略损失=0.195125, 价值损失=170.837921, 熵损失=-0.001344
2025-05-24 01:04:34,756 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013ADBB7D330>
2025-05-24 01:04:34,767 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:04:34,789 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=220.078125, 均值=9.245646, 标准差=18.943873, 最大=119.574509, 最小=0.013230
2025-05-24 01:04:34,803 - [MainProcess] - HMASD - WARNING - 检测到22个参数具有较大梯度 (>10.0):
2025-05-24 01:04:34,803 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 29.040951
2025-05-24 01:04:34,803 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 39.676311
2025-05-24 01:04:34,803 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 19.008268
2025-05-24 01:04:34,803 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 45.167103
2025-05-24 01:04:34,803 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.1.self_attn.in_proj_weight: 梯度范数 = 24.908520
2025-05-24 01:04:34,803 - [MainProcess] - HMASD - WARNING -   ... 还有17个参数有较大梯度
2025-05-24 01:04:34,821 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.021005, 标准差=0.043039, 最大=0.271664, 最小=0.000030
2025-05-24 01:04:34,996 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6691, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:34,996 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=5, total_steps=5, 当前缓冲区大小: 129, 此环境累积奖励: 0.6691, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,003 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8434, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:35,003 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 130, 环境贡献: {0: 65, 1: 65}, 原因统计: {'技能周期结束': 130, '环境终止': 0}
2025-05-24 01:04:35,003 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=5, total_steps=5, 当前缓冲区大小: 130, 此环境累积奖励: 0.8434, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,145 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7018, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:35,145 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=5, total_steps=5, 当前缓冲区大小: 131, 此环境累积奖励: 0.7018, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,151 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9581, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:35,153 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=5, total_steps=5, 当前缓冲区大小: 132, 此环境累积奖励: 0.9581, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,296 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5729, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:35,296 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=5, total_steps=5, 当前缓冲区大小: 133, 此环境累积奖励: 0.5729, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,304 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9577, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:35,304 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=5, total_steps=5, 当前缓冲区大小: 134, 此环境累积奖励: 0.9577, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,454 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6994, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:35,454 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=5, total_steps=5, 当前缓冲区大小: 135, 此环境累积奖励: 0.6994, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,454 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9079, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:35,454 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=5, total_steps=5, 当前缓冲区大小: 136, 此环境累积奖励: 0.9079, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,613 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6276, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:35,613 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=5, total_steps=5, 当前缓冲区大小: 137, 此环境累积奖励: 0.6276, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,620 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8757, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:35,620 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=5, total_steps=5, 当前缓冲区大小: 138, 此环境累积奖励: 0.8757, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,770 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5968, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:35,770 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=5, total_steps=5, 当前缓冲区大小: 139, 此环境累积奖励: 0.5968, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,770 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8147, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:35,770 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 140, 环境贡献: {0: 70, 1: 70}, 原因统计: {'技能周期结束': 140, '环境终止': 0}
2025-05-24 01:04:35,770 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=5, total_steps=5, 当前缓冲区大小: 140, 此环境累积奖励: 0.8147, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,920 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6479, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:35,920 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=5, total_steps=5, 当前缓冲区大小: 141, 此环境累积奖励: 0.6479, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:35,920 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8953, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:35,920 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=5, total_steps=5, 当前缓冲区大小: 142, 此环境累积奖励: 0.8953, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:36,070 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6165, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:36,070 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=5, total_steps=5, 当前缓冲区大小: 143, 此环境累积奖励: 0.6165, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:36,070 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8279, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:36,070 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=5, total_steps=5, 当前缓冲区大小: 144, 此环境累积奖励: 0.8279, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:36,231 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7804, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:36,231 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=5, total_steps=5, 当前缓冲区大小: 145, 此环境累积奖励: 0.7804, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:36,237 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0208, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:36,237 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=5, total_steps=5, 当前缓冲区大小: 146, 此环境累积奖励: 1.0208, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:36,379 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7550, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:36,379 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=5, total_steps=5, 当前缓冲区大小: 147, 此环境累积奖励: 0.7550, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:36,385 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9386, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:36,385 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=5, total_steps=5, 当前缓冲区大小: 148, 此环境累积奖励: 0.9386, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:36,520 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7656, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:36,520 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=5, total_steps=5, 当前缓冲区大小: 149, 此环境累积奖励: 0.7656, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:36,520 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9036, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:36,520 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 150, 环境贡献: {0: 75, 1: 75}, 原因统计: {'技能周期结束': 150, '环境终止': 0}
2025-05-24 01:04:36,520 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=5, total_steps=5, 当前缓冲区大小: 150, 此环境累积奖励: 0.9036, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:36,663 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6707, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:36,663 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=5, total_steps=5, 当前缓冲区大小: 151, 此环境累积奖励: 0.6707, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:36,668 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9599, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:36,668 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=5, total_steps=5, 当前缓冲区大小: 152, 此环境累积奖励: 0.9599, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:36,753 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 152/32 (当前/所需)
2025-05-24 01:04:36,753 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从152个样本中采样32个
2025-05-24 01:04:36,753 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=0.8081, 标准差=0.1705, 最小值=0.5506, 最大值=1.3233
2025-05-24 01:04:36,753 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:04:36,763 - [MainProcess] - HMASD - INFO -   rewards: 均值=0.8081, 标准差=0.1705, 最小值=0.5506, 最大值=1.3233
2025-05-24 01:04:36,763 - [MainProcess] - HMASD - INFO -   state_values: 均值=1.1907, 标准差=0.2137, 最小值=0.8624, 最大值=1.6269
2025-05-24 01:04:36,768 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:04:36,768 - [MainProcess] - HMASD - INFO -   Advantages: 均值=7.3961, 标准差=3.4100, 最小值=-0.6591, 最大值=10.9520
2025-05-24 01:04:36,768 - [MainProcess] - HMASD - INFO -   Returns: 均值=8.5869, 标准差=3.3157, 最小值=0.9679, 最大值=12.0575
2025-05-24 01:04:36,796 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6834
2025-05-24 01:04:36,803 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=145.152250, 策略损失=0.022161, 价值损失=145.131439, 熵损失=-0.001351
2025-05-24 01:04:36,823 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013ADBB7C880>
2025-05-24 01:04:36,839 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:04:36,875 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=202.615326, 均值=8.560613, 标准差=17.416912, 最大=110.201271, 最小=0.012709
2025-05-24 01:04:36,886 - [MainProcess] - HMASD - WARNING - 检测到20个参数具有较大梯度 (>10.0):
2025-05-24 01:04:36,886 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 30.671083
2025-05-24 01:04:36,886 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 35.261879
2025-05-24 01:04:36,886 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 17.787289
2025-05-24 01:04:36,886 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 41.109329
2025-05-24 01:04:36,887 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.1.self_attn.in_proj_weight: 梯度范数 = 22.459959
2025-05-24 01:04:36,887 - [MainProcess] - HMASD - WARNING -   ... 还有15个参数有较大梯度
2025-05-24 01:04:36,893 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.021125, 标准差=0.042980, 最大=0.271947, 最小=0.000031
2025-05-24 01:04:36,970 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6506, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:36,970 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 153, 此环境累积奖励: 0.6506, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:36,979 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1010, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:36,979 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 154, 此环境累积奖励: 1.1010, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,120 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7677, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,120 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 155, 此环境累积奖励: 0.7677, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,120 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0707, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,120 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 156, 此环境累积奖励: 1.0707, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,267 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6433, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,267 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 157, 此环境累积奖励: 0.6433, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,270 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1650, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,270 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 158, 此环境累积奖励: 1.1650, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,406 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6541, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,406 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 159, 此环境累积奖励: 0.6541, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,406 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.2199, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,406 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 160, 环境贡献: {0: 80, 1: 80}, 原因统计: {'技能周期结束': 160, '环境终止': 0}
2025-05-24 01:04:37,406 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 160, 此环境累积奖励: 1.2199, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,554 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7851, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,554 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 161, 此环境累积奖励: 0.7851, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,554 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1137, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,554 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 162, 此环境累积奖励: 1.1137, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,693 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7856, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,693 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 163, 此环境累积奖励: 0.7856, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,696 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9040, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,696 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 164, 此环境累积奖励: 0.9040, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,829 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5223, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,829 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 165, 此环境累积奖励: 0.5223, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,829 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0792, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,829 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 166, 此环境累积奖励: 1.0792, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,972 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6353, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,972 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 167, 此环境累积奖励: 0.6353, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:37,979 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0778, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:37,979 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 168, 此环境累积奖励: 1.0778, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:38,130 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5900, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:38,130 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 169, 此环境累积奖励: 0.5900, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:38,137 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9357, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:38,137 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 170, 环境贡献: {0: 85, 1: 85}, 原因统计: {'技能周期结束': 170, '环境终止': 0}
2025-05-24 01:04:38,137 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 170, 此环境累积奖励: 0.9357, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:38,270 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6959, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:38,270 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 171, 此环境累积奖励: 0.6959, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:38,279 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9301, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:38,279 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 172, 此环境累积奖励: 0.9301, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:38,430 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6226, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:38,430 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 173, 此环境累积奖励: 0.6226, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:38,437 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9164, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:38,437 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 174, 此环境累积奖励: 0.9164, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:38,580 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7533, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:38,580 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 175, 此环境累积奖励: 0.7533, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:38,586 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9762, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:38,587 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 176, 此环境累积奖励: 0.9762, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:38,720 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8939, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:38,720 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=6, total_steps=6, 当前缓冲区大小: 177, 此环境累积奖励: 0.8939, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:38,720 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8904, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:38,720 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=6, total_steps=6, 当前缓冲区大小: 178, 此环境累积奖励: 0.8904, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:38,786 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 178/32 (当前/所需)
2025-05-24 01:04:38,786 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从178个样本中采样32个
2025-05-24 01:04:38,786 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=0.8509, 标准差=0.2276, 最小值=0.5043, 最大值=1.3681
2025-05-24 01:04:38,786 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:04:38,786 - [MainProcess] - HMASD - INFO -   rewards: 均值=0.8509, 标准差=0.2276, 最小值=0.5043, 最大值=1.3681
2025-05-24 01:04:38,786 - [MainProcess] - HMASD - INFO -   state_values: 均值=1.2497, 标准差=0.1464, 最小值=0.7959, 最大值=1.5421
2025-05-24 01:04:38,796 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:04:38,796 - [MainProcess] - HMASD - INFO -   Advantages: 均值=7.8544, 标准差=3.6804, 最小值=-0.7007, 最大值=11.4041
2025-05-24 01:04:38,796 - [MainProcess] - HMASD - INFO -   Returns: 均值=9.1041, 标准差=3.6960, 最小值=0.5043, 最大值=12.6188
2025-05-24 01:04:38,822 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6792
2025-05-24 01:04:38,828 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=164.843354, 策略损失=0.075807, 价值损失=164.768890, 熵损失=-0.001344
2025-05-24 01:04:38,854 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013ADBB7C160>
2025-05-24 01:04:38,870 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:04:38,903 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=209.889084, 均值=8.834600, 标准差=18.058506, 最大=117.108208, 最小=0.012330
2025-05-24 01:04:38,904 - [MainProcess] - HMASD - WARNING - 检测到21个参数具有较大梯度 (>10.0):
2025-05-24 01:04:38,913 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 26.954927
2025-05-24 01:04:38,913 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 36.109589
2025-05-24 01:04:38,913 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 18.249571
2025-05-24 01:04:38,913 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 42.405964
2025-05-24 01:04:38,913 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.1.self_attn.in_proj_weight: 梯度范数 = 22.632238
2025-05-24 01:04:38,913 - [MainProcess] - HMASD - WARNING -   ... 还有16个参数有较大梯度
2025-05-24 01:04:38,928 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.021046, 标准差=0.043019, 最大=0.278976, 最小=0.000029
2025-05-24 01:04:39,037 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8154, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:39,037 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 179, 此环境累积奖励: 0.8154, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,049 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9256, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:04:39,049 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 180, 环境贡献: {0: 90, 1: 90}, 原因统计: {'技能周期结束': 180, '环境终止': 0}
2025-05-24 01:04:39,049 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 180, 此环境累积奖励: 0.9256, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,187 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6929, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:39,187 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 181, 此环境累积奖励: 0.6929, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,187 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8216, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:39,187 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 182, 此环境累积奖励: 0.8216, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,320 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7430, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:39,320 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 183, 此环境累积奖励: 0.7430, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,330 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9656, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:39,330 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 184, 此环境累积奖励: 0.9656, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,470 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5908, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:39,470 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 185, 此环境累积奖励: 0.5908, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,470 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0843, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:39,470 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 186, 此环境累积奖励: 1.0843, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,613 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6900, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:39,613 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 187, 此环境累积奖励: 0.6900, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,613 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0241, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:39,618 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 188, 此环境累积奖励: 1.0241, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,755 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7005, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:39,755 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 189, 此环境累积奖励: 0.7005, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,755 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1885, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:39,755 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 190, 环境贡献: {0: 95, 1: 95}, 原因统计: {'技能周期结束': 190, '环境终止': 0}
2025-05-24 01:04:39,755 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 190, 此环境累积奖励: 1.1885, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,909 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6478, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:39,909 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 191, 此环境累积奖励: 0.6478, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:39,913 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1458, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:39,913 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 192, 此环境累积奖励: 1.1458, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:40,047 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6917, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:40,047 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 193, 此环境累积奖励: 0.6917, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:40,054 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0087, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:40,054 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 194, 此环境累积奖励: 1.0087, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:40,193 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7670, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:40,193 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 195, 此环境累积奖励: 0.7670, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:40,203 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7959, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:40,204 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 196, 此环境累积奖励: 0.7959, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:40,336 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6721, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:40,336 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 197, 此环境累积奖励: 0.6721, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:40,345 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9979, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:40,345 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 198, 此环境累积奖励: 0.9979, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:40,423 - [MainProcess] - Test-Training - INFO - 进度: 1000/10000 步 (10.0%), 用时: 15.2s
2025-05-24 01:04:40,470 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7497, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:40,479 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 199, 此环境累积奖励: 0.7497, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:40,482 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1088, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:04:40,482 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 200, 环境贡献: {0: 100, 1: 100}, 原因统计: {'技能周期结束': 200, '环境终止': 0}
2025-05-24 01:04:40,482 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 200, 此环境累积奖励: 1.1088, 成功添加：True, 原因：技能周期结束
2025-05-24 01:04:40,484 - [MainProcess] - Test-Training - INFO - 即将进行评估 #1, 当前步数: 1000, 距离上次评估: 1000 步
2025-05-24 01:04:40,484 - [MainProcess] - Test-Training - INFO - 开始评估: 目标完成 2 个episodes，使用 2 个并行环境，是否渲染: False
2025-05-24 01:04:41,620 - [MainProcess] - Test-Training - INFO - 评估性能统计 [100步]: agent.step平均耗时: 0.009606秒/步, vec_env.step平均耗时: 0.003444秒/步
2025-05-24 01:04:42,805 - [MainProcess] - Test-Training - INFO - 评估性能统计 [200步]: agent.step平均耗时: 0.009398秒/步, vec_env.step平均耗时: 0.004172秒/步
2025-05-24 01:04:44,006 - [MainProcess] - Test-Training - INFO - 评估性能统计 [300步]: agent.step平均耗时: 0.010685秒/步, vec_env.step平均耗时: 0.003764秒/步
2025-05-24 01:04:45,254 - [MainProcess] - Test-Training - INFO - 评估性能统计 [400步]: agent.step平均耗时: 0.010623秒/步, vec_env.step平均耗时: 0.003170秒/步
2025-05-24 01:04:46,546 - [MainProcess] - Test-Training - INFO - 评估性能统计 [500步]: agent.step平均耗时: 0.011746秒/步, vec_env.step平均耗时: 0.003030秒/步
2025-05-24 01:04:47,906 - [MainProcess] - Test-Training - INFO - 评估性能统计 [600步]: agent.step平均耗时: 0.011310秒/步, vec_env.step平均耗时: 0.003463秒/步
2025-05-24 01:04:49,253 - [MainProcess] - Test-Training - INFO - 评估性能统计 [700步]: agent.step平均耗时: 0.012062秒/步, vec_env.step平均耗时: 0.003673秒/步
2025-05-24 01:04:50,622 - [MainProcess] - Test-Training - INFO - 评估性能统计 [800步]: agent.step平均耗时: 0.011948秒/步, vec_env.step平均耗时: 0.003124秒/步
2025-05-24 01:04:51,918 - [MainProcess] - Test-Training - INFO - 评估性能统计 [900步]: agent.step平均耗时: 0.010933秒/步, vec_env.step平均耗时: 0.003769秒/步
2025-05-24 01:04:53,170 - [MainProcess] - Test-Training - INFO - 评估性能统计 [1000步]: agent.step平均耗时: 0.010310秒/步, vec_env.step平均耗时: 0.004236秒/步
2025-05-24 01:04:54,409 - [MainProcess] - Test-Training - INFO - 评估性能统计 [1100步]: agent.step平均耗时: 0.010330秒/步, vec_env.step平均耗时: 0.004118秒/步
2025-05-24 01:04:55,664 - [MainProcess] - Test-Training - INFO - 评估性能统计 [1200步]: agent.step平均耗时: 0.008271秒/步, vec_env.step平均耗时: 0.006184秒/步
2025-05-24 01:04:56,881 - [MainProcess] - Test-Training - INFO - 评估性能统计 [1300步]: agent.step平均耗时: 0.007796秒/步, vec_env.step平均耗时: 0.008645秒/步
2025-05-24 01:04:58,053 - [MainProcess] - Test-Training - INFO - 评估性能统计 [1400步]: agent.step平均耗时: 0.010271秒/步, vec_env.step平均耗时: 0.005824秒/步
2025-05-24 01:04:59,285 - [MainProcess] - Test-Training - INFO - 评估性能统计 [1500步]: agent.step平均耗时: 0.010485秒/步, vec_env.step平均耗时: 0.003275秒/步
2025-05-24 01:05:00,605 - [MainProcess] - Test-Training - INFO - 评估性能统计 [1600步]: agent.step平均耗时: 0.011853秒/步, vec_env.step平均耗时: 0.003158秒/步
2025-05-24 01:05:01,940 - [MainProcess] - Test-Training - INFO - 评估性能统计 [1700步]: agent.step平均耗时: 0.011734秒/步, vec_env.step平均耗时: 0.002945秒/步
2025-05-24 01:05:03,247 - [MainProcess] - Test-Training - INFO - 评估性能统计 [1800步]: agent.step平均耗时: 0.011706秒/步, vec_env.step平均耗时: 0.002957秒/步
2025-05-24 01:05:04,601 - [MainProcess] - Test-Training - INFO - 评估性能统计 [1900步]: agent.step平均耗时: 0.011524秒/步, vec_env.step平均耗时: 0.003338秒/步
2025-05-24 01:05:05,931 - [MainProcess] - Test-Training - INFO - 评估性能统计 [2000步]: agent.step平均耗时: 0.011786秒/步, vec_env.step平均耗时: 0.003508秒/步
2025-05-24 01:05:07,171 - [MainProcess] - Test-Training - INFO - 评估性能统计 [2100步]: agent.step平均耗时: 0.011417秒/步, vec_env.step平均耗时: 0.002498秒/步
2025-05-24 01:05:08,437 - [MainProcess] - Test-Training - INFO - 评估性能统计 [2200步]: agent.step平均耗时: 0.010897秒/步, vec_env.step平均耗时: 0.002742秒/步
2025-05-24 01:05:09,671 - [MainProcess] - Test-Training - INFO - 评估性能统计 [2300步]: agent.step平均耗时: 0.009804秒/步, vec_env.step平均耗时: 0.004278秒/步
2025-05-24 01:05:10,885 - [MainProcess] - Test-Training - INFO - 评估性能统计 [2400步]: agent.step平均耗时: 0.010578秒/步, vec_env.step平均耗时: 0.004074秒/步
2025-05-24 01:05:12,156 - [MainProcess] - Test-Training - INFO - 评估性能统计 [2500步]: agent.step平均耗时: 0.010424秒/步, vec_env.step平均耗时: 0.003805秒/步
2025-05-24 01:05:13,348 - [MainProcess] - Test-Training - INFO - 评估性能统计 [2600步]: agent.step平均耗时: 0.009554秒/步, vec_env.step平均耗时: 0.004611秒/步
2025-05-24 01:05:14,637 - [MainProcess] - Test-Training - INFO - 评估性能统计 [2700步]: agent.step平均耗时: 0.011045秒/步, vec_env.step平均耗时: 0.004203秒/步
2025-05-24 01:05:15,971 - [MainProcess] - Test-Training - INFO - 评估性能统计 [2800步]: agent.step平均耗时: 0.010857秒/步, vec_env.step平均耗时: 0.004321秒/步
2025-05-24 01:05:17,320 - [MainProcess] - Test-Training - INFO - 评估性能统计 [2900步]: agent.step平均耗时: 0.011454秒/步, vec_env.step平均耗时: 0.004508秒/步
2025-05-24 01:05:18,620 - [MainProcess] - Test-Training - INFO - 评估性能统计 [3000步]: agent.step平均耗时: 0.011149秒/步, vec_env.step平均耗时: 0.003822秒/步
2025-05-24 01:05:19,987 - [MainProcess] - Test-Training - INFO - 评估性能统计 [3100步]: agent.step平均耗时: 0.011413秒/步, vec_env.step平均耗时: 0.004029秒/步
2025-05-24 01:05:21,215 - [MainProcess] - Test-Training - INFO - 评估性能统计 [3200步]: agent.step平均耗时: 0.009600秒/步, vec_env.step平均耗时: 0.004914秒/步
2025-05-24 01:05:22,302 - [MainProcess] - Test-Training - INFO - 评估性能统计 [3300步]: agent.step平均耗时: 0.008880秒/步, vec_env.step平均耗时: 0.004633秒/步
2025-05-24 01:05:23,403 - [MainProcess] - Test-Training - INFO - 评估性能统计 [3400步]: agent.step平均耗时: 0.008855秒/步, vec_env.step平均耗时: 0.004091秒/步
2025-05-24 01:05:24,470 - [MainProcess] - Test-Training - INFO - 评估性能统计 [3500步]: agent.step平均耗时: 0.008559秒/步, vec_env.step平均耗时: 0.004245秒/步
2025-05-24 01:05:25,576 - [MainProcess] - Test-Training - INFO - 评估性能统计 [3600步]: agent.step平均耗时: 0.008874秒/步, vec_env.step平均耗时: 0.004291秒/步
2025-05-24 01:05:26,731 - [MainProcess] - Test-Training - INFO - 评估性能统计 [3700步]: agent.step平均耗时: 0.009375秒/步, vec_env.step平均耗时: 0.004298秒/步
2025-05-24 01:05:27,939 - [MainProcess] - Test-Training - INFO - 评估性能统计 [3800步]: agent.step平均耗时: 0.010147秒/步, vec_env.step平均耗时: 0.004024秒/步
2025-05-24 01:05:29,136 - [MainProcess] - Test-Training - INFO - 评估性能统计 [3900步]: agent.step平均耗时: 0.009980秒/步, vec_env.step平均耗时: 0.003891秒/步
2025-05-24 01:05:30,438 - [MainProcess] - Test-Training - INFO - 评估性能统计 [4000步]: agent.step平均耗时: 0.011023秒/步, vec_env.step平均耗时: 0.003969秒/步
2025-05-24 01:05:31,779 - [MainProcess] - Test-Training - INFO - 评估性能统计 [4100步]: agent.step平均耗时: 0.011749秒/步, vec_env.step平均耗时: 0.003636秒/步
2025-05-24 01:05:33,128 - [MainProcess] - Test-Training - INFO - 评估性能统计 [4200步]: agent.step平均耗时: 0.011183秒/步, vec_env.step平均耗时: 0.003898秒/步
2025-05-24 01:05:34,437 - [MainProcess] - Test-Training - INFO - 评估性能统计 [4300步]: agent.step平均耗时: 0.011514秒/步, vec_env.step平均耗时: 0.003799秒/步
2025-05-24 01:05:35,838 - [MainProcess] - Test-Training - INFO - 评估性能统计 [4400步]: agent.step平均耗时: 0.011871秒/步, vec_env.step平均耗时: 0.003681秒/步
2025-05-24 01:05:37,159 - [MainProcess] - Test-Training - INFO - 评估性能统计 [4500步]: agent.step平均耗时: 0.010489秒/步, vec_env.step平均耗时: 0.004855秒/步
2025-05-24 01:05:38,437 - [MainProcess] - Test-Training - INFO - 评估性能统计 [4600步]: agent.step平均耗时: 0.011213秒/步, vec_env.step平均耗时: 0.004283秒/步
2025-05-24 01:05:39,750 - [MainProcess] - Test-Training - INFO - 评估性能统计 [4700步]: agent.step平均耗时: 0.010815秒/步, vec_env.step平均耗时: 0.003829秒/步
2025-05-24 01:05:40,987 - [MainProcess] - Test-Training - INFO - 评估性能统计 [4800步]: agent.step平均耗时: 0.010421秒/步, vec_env.step平均耗时: 0.004207秒/步
2025-05-24 01:05:42,253 - [MainProcess] - Test-Training - INFO - 评估性能统计 [4900步]: agent.step平均耗时: 0.009332秒/步, vec_env.step平均耗时: 0.005265秒/步
2025-05-24 01:05:43,565 - [MainProcess] - Test-Training - INFO - 评估性能统计 [5000步]: agent.step平均耗时: 0.010488秒/步, vec_env.step平均耗时: 0.005926秒/步
2025-05-24 01:05:44,912 - [MainProcess] - Test-Training - INFO - 评估性能统计 [5100步]: agent.step平均耗时: 0.011632秒/步, vec_env.step平均耗时: 0.004379秒/步
2025-05-24 01:05:46,316 - [MainProcess] - Test-Training - INFO - 评估性能统计 [5200步]: agent.step平均耗时: 0.011959秒/步, vec_env.step平均耗时: 0.003860秒/步
2025-05-24 01:05:47,720 - [MainProcess] - Test-Training - INFO - 评估性能统计 [5300步]: agent.step平均耗时: 0.011619秒/步, vec_env.step平均耗时: 0.004502秒/步
2025-05-24 01:05:49,120 - [MainProcess] - Test-Training - INFO - 评估性能统计 [5400步]: agent.step平均耗时: 0.011641秒/步, vec_env.step平均耗时: 0.004753秒/步
2025-05-24 01:05:50,436 - [MainProcess] - Test-Training - INFO - 评估性能统计 [5500步]: agent.step平均耗时: 0.010742秒/步, vec_env.step平均耗时: 0.004740秒/步
2025-05-24 01:05:51,765 - [MainProcess] - Test-Training - INFO - 评估性能统计 [5600步]: agent.step平均耗时: 0.011425秒/步, vec_env.step平均耗时: 0.004109秒/步
2025-05-24 01:05:53,004 - [MainProcess] - Test-Training - INFO - 评估性能统计 [5700步]: agent.step平均耗时: 0.009959秒/步, vec_env.step平均耗时: 0.004134秒/步
2025-05-24 01:05:54,279 - [MainProcess] - Test-Training - INFO - 评估性能统计 [5800步]: agent.step平均耗时: 0.011090秒/步, vec_env.step平均耗时: 0.003935秒/步
2025-05-24 01:05:55,329 - [MainProcess] - Test-Training - INFO - 评估性能统计 [5900步]: agent.step平均耗时: 0.007313秒/步, vec_env.step平均耗时: 0.004687秒/步
2025-05-24 01:05:56,388 - [MainProcess] - Test-Training - INFO - 评估性能统计 [6000步]: agent.step平均耗时: 0.008312秒/步, vec_env.step平均耗时: 0.005453秒/步
2025-05-24 01:05:57,456 - [MainProcess] - Test-Training - INFO - 评估性能统计 [6100步]: agent.step平均耗时: 0.007724秒/步, vec_env.step平均耗时: 0.005223秒/步
2025-05-24 01:05:58,557 - [MainProcess] - Test-Training - INFO - 评估性能统计 [6200步]: agent.step平均耗时: 0.008202秒/步, vec_env.step平均耗时: 0.005745秒/步
2025-05-24 01:05:59,737 - [MainProcess] - Test-Training - INFO - 评估性能统计 [6300步]: agent.step平均耗时: 0.009260秒/步, vec_env.step平均耗时: 0.005331秒/步
2025-05-24 01:06:00,939 - [MainProcess] - Test-Training - INFO - 评估性能统计 [6400步]: agent.step平均耗时: 0.009665秒/步, vec_env.step平均耗时: 0.004883秒/步
2025-05-24 01:06:02,078 - [MainProcess] - Test-Training - INFO - 评估性能统计 [6500步]: agent.step平均耗时: 0.009942秒/步, vec_env.step平均耗时: 0.003787秒/步
2025-05-24 01:06:03,248 - [MainProcess] - Test-Training - INFO - 评估性能统计 [6600步]: agent.step平均耗时: 0.009065秒/步, vec_env.step平均耗时: 0.004080秒/步
2025-05-24 01:06:04,437 - [MainProcess] - Test-Training - INFO - 评估性能统计 [6700步]: agent.step平均耗时: 0.010203秒/步, vec_env.step平均耗时: 0.004322秒/步
2025-05-24 01:06:05,592 - [MainProcess] - Test-Training - INFO - 评估性能统计 [6800步]: agent.step平均耗时: 0.010235秒/步, vec_env.step平均耗时: 0.003001秒/步
2025-05-24 01:06:06,737 - [MainProcess] - Test-Training - INFO - 评估性能统计 [6900步]: agent.step平均耗时: 0.009793秒/步, vec_env.step平均耗时: 0.002970秒/步
2025-05-24 01:06:07,797 - [MainProcess] - Test-Training - INFO - 评估性能统计 [7000步]: agent.step平均耗时: 0.008521秒/步, vec_env.step平均耗时: 0.003739秒/步
2025-05-24 01:06:08,854 - [MainProcess] - Test-Training - INFO - 评估性能统计 [7100步]: agent.step平均耗时: 0.008566秒/步, vec_env.step平均耗时: 0.004082秒/步
2025-05-24 01:06:09,913 - [MainProcess] - Test-Training - INFO - 评估性能统计 [7200步]: agent.step平均耗时: 0.008278秒/步, vec_env.step平均耗时: 0.004314秒/步
2025-05-24 01:06:11,037 - [MainProcess] - Test-Training - INFO - 评估性能统计 [7300步]: agent.step平均耗时: 0.009320秒/步, vec_env.step平均耗时: 0.004226秒/步
2025-05-24 01:06:12,154 - [MainProcess] - Test-Training - INFO - 评估性能统计 [7400步]: agent.step平均耗时: 0.008722秒/步, vec_env.step平均耗时: 0.004247秒/步
2025-05-24 01:06:13,337 - [MainProcess] - Test-Training - INFO - 评估性能统计 [7500步]: agent.step平均耗时: 0.010093秒/步, vec_env.step平均耗时: 0.004072秒/步
2025-05-24 01:06:14,504 - [MainProcess] - Test-Training - INFO - 评估性能统计 [7600步]: agent.step平均耗时: 0.009772秒/步, vec_env.step平均耗时: 0.003628秒/步
2025-05-24 01:06:15,725 - [MainProcess] - Test-Training - INFO - 评估性能统计 [7700步]: agent.step平均耗时: 0.010068秒/步, vec_env.step平均耗时: 0.003931秒/步
2025-05-24 01:06:16,904 - [MainProcess] - Test-Training - INFO - 评估性能统计 [7800步]: agent.step平均耗时: 0.009834秒/步, vec_env.step平均耗时: 0.003936秒/步
2025-05-24 01:06:18,088 - [MainProcess] - Test-Training - INFO - 评估性能统计 [7900步]: agent.step平均耗时: 0.010465秒/步, vec_env.step平均耗时: 0.003265秒/步
2025-05-24 01:06:19,335 - [MainProcess] - Test-Training - INFO - 评估性能统计 [8000步]: agent.step平均耗时: 0.010262秒/步, vec_env.step平均耗时: 0.003581秒/步
2025-05-24 01:06:20,654 - [MainProcess] - Test-Training - INFO - 评估性能统计 [8100步]: agent.step平均耗时: 0.011522秒/步, vec_env.step平均耗时: 0.003858秒/步
2025-05-24 01:06:21,938 - [MainProcess] - Test-Training - INFO - 评估性能统计 [8200步]: agent.step平均耗时: 0.009002秒/步, vec_env.step平均耗时: 0.005478秒/步
2025-05-24 01:06:23,209 - [MainProcess] - Test-Training - INFO - 评估性能统计 [8300步]: agent.step平均耗时: 0.009441秒/步, vec_env.step平均耗时: 0.007103秒/步
2025-05-24 01:06:24,424 - [MainProcess] - Test-Training - INFO - 评估性能统计 [8400步]: agent.step平均耗时: 0.010513秒/步, vec_env.step平均耗时: 0.004857秒/步
2025-05-24 01:06:25,623 - [MainProcess] - Test-Training - INFO - 评估性能统计 [8500步]: agent.step平均耗时: 0.009658秒/步, vec_env.step平均耗时: 0.003920秒/步
2025-05-24 01:06:26,837 - [MainProcess] - Test-Training - INFO - 评估性能统计 [8600步]: agent.step平均耗时: 0.009527秒/步, vec_env.step平均耗时: 0.004949秒/步
2025-05-24 01:06:28,058 - [MainProcess] - Test-Training - INFO - 评估性能统计 [8700步]: agent.step平均耗时: 0.009839秒/步, vec_env.step平均耗时: 0.004982秒/步
2025-05-24 01:06:29,282 - [MainProcess] - Test-Training - INFO - 评估性能统计 [8800步]: agent.step平均耗时: 0.009773秒/步, vec_env.step平均耗时: 0.004834秒/步
2025-05-24 01:06:30,554 - [MainProcess] - Test-Training - INFO - 评估性能统计 [8900步]: agent.step平均耗时: 0.010703秒/步, vec_env.step平均耗时: 0.004486秒/步
2025-05-24 01:06:32,148 - [MainProcess] - Test-Training - INFO - 评估性能统计 [9000步]: agent.step平均耗时: 0.013470秒/步, vec_env.step平均耗时: 0.004448秒/步
2025-05-24 01:06:33,605 - [MainProcess] - Test-Training - INFO - 评估性能统计 [9100步]: agent.step平均耗时: 0.012384秒/步, vec_env.step平均耗时: 0.004587秒/步
2025-05-24 01:06:34,934 - [MainProcess] - Test-Training - INFO - 评估性能统计 [9200步]: agent.step平均耗时: 0.011007秒/步, vec_env.step平均耗时: 0.004423秒/步
2025-05-24 01:06:36,235 - [MainProcess] - Test-Training - INFO - 评估性能统计 [9300步]: agent.step平均耗时: 0.010489秒/步, vec_env.step平均耗时: 0.004783秒/步
2025-05-24 01:06:37,553 - [MainProcess] - Test-Training - INFO - 评估性能统计 [9400步]: agent.step平均耗时: 0.009758秒/步, vec_env.step平均耗时: 0.005905秒/步
2025-05-24 01:06:38,819 - [MainProcess] - Test-Training - INFO - 评估性能统计 [9500步]: agent.step平均耗时: 0.008788秒/步, vec_env.step平均耗时: 0.007245秒/步
2025-05-24 01:06:40,000 - [MainProcess] - Test-Training - INFO - 评估性能统计 [9600步]: agent.step平均耗时: 0.008374秒/步, vec_env.step平均耗时: 0.007297秒/步
2025-05-24 01:06:41,183 - [MainProcess] - Test-Training - INFO - 评估性能统计 [9700步]: agent.step平均耗时: 0.007578秒/步, vec_env.step平均耗时: 0.007692秒/步
2025-05-24 01:06:42,386 - [MainProcess] - Test-Training - INFO - 评估性能统计 [9800步]: agent.step平均耗时: 0.007905秒/步, vec_env.step平均耗时: 0.008373秒/步
2025-05-24 01:06:43,570 - [MainProcess] - Test-Training - INFO - 评估性能统计 [9900步]: agent.step平均耗时: 0.009639秒/步, vec_env.step平均耗时: 0.006311秒/步
2025-05-24 01:06:44,770 - [MainProcess] - Test-Training - INFO - 评估性能统计 [10000步]: agent.step平均耗时: 0.008825秒/步, vec_env.step平均耗时: 0.005372秒/步
2025-05-24 01:06:44,770 - [MainProcess] - Test-Training - INFO - 评估 Episode 1/2 (来自环境 0), 奖励: 726.02, 步数: 5000
2025-05-24 01:06:44,770 - [MainProcess] - Test-Training - INFO - 评估 Episode 2/2 (来自环境 1), 奖励: 851.95, 步数: 5000
2025-05-24 01:06:44,786 - [MainProcess] - Test-Training - INFO - 
===== 评估技能分布统计 =====
2025-05-24 01:06:44,786 - [MainProcess] - Test-Training - INFO - 团队技能使用分布: [0.3729 0.6271]
2025-05-24 01:06:44,804 - [MainProcess] - Test-Training - INFO - 智能体 0 技能使用分布: [0.5129 0.4871]
2025-05-24 01:06:44,805 - [MainProcess] - Test-Training - INFO - 智能体 1 技能使用分布: [0.5239 0.4761]
2025-05-24 01:06:44,805 - [MainProcess] - Test-Training - INFO - 智能体 2 技能使用分布: [0.546 0.454]
2025-05-24 01:06:44,805 - [MainProcess] - Test-Training - INFO - 
===== 评估奖励统计 =====
2025-05-24 01:06:44,806 - [MainProcess] - Test-Training - INFO - 高层奖励平均值: 788.9846
2025-05-24 01:06:44,806 - [MainProcess] - Test-Training - INFO - 
===== 评估性能统计 =====
2025-05-24 01:06:44,806 - [MainProcess] - Test-Training - INFO - 总评估时间: 124.32秒 (完成 2 episodes, 共 10000 步)
2025-05-24 01:06:44,807 - [MainProcess] - Test-Training - INFO - 每步平均耗时: 0.012432秒
2025-05-24 01:06:44,807 - [MainProcess] - Test-Training - INFO - agent.step 平均耗时: 0.010192秒/步 (占 82.0%)
2025-05-24 01:06:44,807 - [MainProcess] - Test-Training - INFO - env.step 平均耗时: 0.004437秒/步 (占 35.7%)
2025-05-24 01:06:44,807 - [MainProcess] - Test-Training - INFO - 其他操作耗时: -0.002197秒/步
2025-05-24 01:06:44,807 - [MainProcess] - Test-Training - INFO - 
评估完成 (2 episodes): 平均奖励 788.98 ± 62.97, 平均步数: 5000.00
2025-05-24 01:06:44,810 - [MainProcess] - Test-Training - INFO - 评估 #1 完成: 平均奖励 788.98 ± 62.97
2025-05-24 01:06:44,826 - [MainProcess] - HMASD - INFO - 模型已保存到 test\test_run_20250524_010418\best_model.pt
2025-05-24 01:06:44,826 - [MainProcess] - Test-Training - INFO - 保存最佳模型，奖励: 788.98
2025-05-24 01:06:44,970 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6791, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:44,970 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 201, 此环境累积奖励: 0.6791, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:44,970 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0064, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:44,970 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 202, 此环境累积奖励: 1.0064, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:45,120 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6007, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:45,120 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=7, total_steps=7, 当前缓冲区大小: 203, 此环境累积奖励: 0.6007, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:45,120 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9126, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:45,120 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=7, total_steps=7, 当前缓冲区大小: 204, 此环境累积奖励: 0.9126, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:45,175 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 204/32 (当前/所需)
2025-05-24 01:06:45,175 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从204个样本中采样32个
2025-05-24 01:06:45,175 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=0.8427, 标准差=0.1834, 最小值=0.6165, 最大值=1.2590
2025-05-24 01:06:45,175 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:06:45,175 - [MainProcess] - HMASD - INFO -   rewards: 均值=0.8427, 标准差=0.1834, 最小值=0.6165, 最大值=1.2590
2025-05-24 01:06:45,175 - [MainProcess] - HMASD - INFO -   state_values: 均值=1.3582, 标准差=0.2053, 最小值=0.9144, 最大值=1.7455
2025-05-24 01:06:45,192 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:06:45,192 - [MainProcess] - HMASD - INFO -   Advantages: 均值=7.4403, 标准差=3.6888, 最小值=-0.3464, 最大值=11.9657
2025-05-24 01:06:45,192 - [MainProcess] - HMASD - INFO -   Returns: 均值=8.7985, 标准差=3.6946, 最小值=1.2215, 最大值=13.0879
2025-05-24 01:06:45,214 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6788
2025-05-24 01:06:45,224 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=152.683547, 策略损失=0.122747, 价值损失=152.562149, 熵损失=-0.001349
2025-05-24 01:06:45,256 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013AD0EAE3B0>
2025-05-24 01:06:45,260 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:06:45,308 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=199.476410, 均值=8.373111, 标准差=17.173954, 最大=111.598236, 最小=0.011694
2025-05-24 01:06:45,329 - [MainProcess] - HMASD - WARNING - 检测到20个参数具有较大梯度 (>10.0):
2025-05-24 01:06:45,329 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 26.288639
2025-05-24 01:06:45,329 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 35.274857
2025-05-24 01:06:45,329 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 16.846788
2025-05-24 01:06:45,329 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 39.792233
2025-05-24 01:06:45,329 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.1.self_attn.in_proj_weight: 梯度范数 = 21.146103
2025-05-24 01:06:45,329 - [MainProcess] - HMASD - WARNING -   ... 还有15个参数有较大梯度
2025-05-24 01:06:45,346 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.020988, 标准差=0.043048, 最大=0.279728, 最小=0.000029
2025-05-24 01:06:45,470 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7142, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:45,470 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 205, 此环境累积奖励: 0.7142, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:45,470 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9789, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:45,470 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 206, 此环境累积奖励: 0.9789, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:45,607 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7838, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:45,607 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 207, 此环境累积奖励: 0.7838, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:45,610 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9548, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:45,610 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 208, 此环境累积奖励: 0.9548, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:45,768 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7896, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:45,769 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 209, 此环境累积奖励: 0.7896, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:45,770 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8652, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:45,770 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 210, 环境贡献: {0: 105, 1: 105}, 原因统计: {'技能周期结束': 210, '环境终止': 0}
2025-05-24 01:06:45,770 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 210, 此环境累积奖励: 0.8652, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:45,905 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6805, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:45,905 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 211, 此环境累积奖励: 0.6805, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:45,919 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9398, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:45,920 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 212, 此环境累积奖励: 0.9398, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,053 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6855, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,053 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 213, 此环境累积奖励: 0.6855, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,053 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9580, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,053 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 214, 此环境累积奖励: 0.9580, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,203 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7320, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,203 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 215, 此环境累积奖励: 0.7320, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,203 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9890, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,203 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 216, 此环境累积奖励: 0.9890, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,356 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7955, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,356 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 217, 此环境累积奖励: 0.7955, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,359 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8267, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,359 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 218, 此环境累积奖励: 0.8267, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,498 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9285, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,498 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 219, 此环境累积奖励: 0.9285, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,503 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9374, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,503 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 220, 环境贡献: {0: 110, 1: 110}, 原因统计: {'技能周期结束': 220, '环境终止': 0}
2025-05-24 01:06:46,503 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 220, 此环境累积奖励: 0.9374, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,653 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7049, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,653 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 221, 此环境累积奖励: 0.7049, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,653 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8276, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,653 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 222, 此环境累积奖励: 0.8276, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,809 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7696, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,810 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 223, 此环境累积奖励: 0.7696, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,813 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9656, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,813 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 224, 此环境累积奖励: 0.9656, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,970 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7484, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,970 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 225, 此环境累积奖励: 0.7484, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:46,970 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8829, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:46,970 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 226, 此环境累积奖励: 0.8829, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:47,125 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7746, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:47,125 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 227, 此环境累积奖励: 0.7746, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:47,130 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8349, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:47,130 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 228, 此环境累积奖励: 0.8349, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:47,287 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7480, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:47,287 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=8, total_steps=8, 当前缓冲区大小: 229, 此环境累积奖励: 0.7480, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:47,287 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7528, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:47,287 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 230, 环境贡献: {0: 115, 1: 115}, 原因统计: {'技能周期结束': 230, '环境终止': 0}
2025-05-24 01:06:47,287 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=8, total_steps=8, 当前缓冲区大小: 230, 此环境累积奖励: 0.7528, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:47,309 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 230/32 (当前/所需)
2025-05-24 01:06:47,309 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从230个样本中采样32个
2025-05-24 01:06:47,309 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=0.8647, 标准差=0.2206, 最小值=0.5372, 最大值=1.3681
2025-05-24 01:06:47,321 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:06:47,322 - [MainProcess] - HMASD - INFO -   rewards: 均值=0.8647, 标准差=0.2206, 最小值=0.5372, 最大值=1.3681
2025-05-24 01:06:47,322 - [MainProcess] - HMASD - INFO -   state_values: 均值=1.4573, 标准差=0.1746, 最小值=1.1943, 最大值=1.8640
2025-05-24 01:06:47,327 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:06:47,327 - [MainProcess] - HMASD - INFO -   Advantages: 均值=7.6942, 标准差=3.8911, 最小值=-0.2323, 最大值=11.9749
2025-05-24 01:06:47,327 - [MainProcess] - HMASD - INFO -   Returns: 均值=9.1515, 标准差=3.9114, 最小值=0.9960, 最大值=13.3641
2025-05-24 01:06:47,350 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6787
2025-05-24 01:06:47,359 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=165.593001, 策略损失=0.112078, 价值损失=165.482269, 熵损失=-0.001347
2025-05-24 01:06:47,389 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013AD0EAE230>
2025-05-24 01:06:47,403 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:06:47,437 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=203.880356, 均值=8.511349, 标准差=17.575762, 最大=114.248550, 最小=0.007772
2025-05-24 01:06:47,457 - [MainProcess] - HMASD - WARNING - 检测到21个参数具有较大梯度 (>10.0):
2025-05-24 01:06:47,458 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 27.013683
2025-05-24 01:06:47,458 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 35.990639
2025-05-24 01:06:47,458 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 17.389692
2025-05-24 01:06:47,458 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 40.187061
2025-05-24 01:06:47,458 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.1.self_attn.in_proj_weight: 梯度范数 = 21.522631
2025-05-24 01:06:47,458 - [MainProcess] - HMASD - WARNING -   ... 还有16个参数有较大梯度
2025-05-24 01:06:47,475 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.020873, 标准差=0.043103, 最大=0.280185, 最小=0.000019
2025-05-24 01:06:47,620 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8128, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:47,620 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 231, 此环境累积奖励: 0.8128, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:47,620 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8453, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:47,620 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 232, 此环境累积奖励: 0.8453, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:47,770 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8545, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:47,770 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 233, 此环境累积奖励: 0.8545, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:47,786 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8246, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:47,786 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 234, 此环境累积奖励: 0.8246, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:47,929 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8932, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:47,930 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 235, 此环境累积奖励: 0.8932, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:47,936 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8926, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:47,936 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 236, 此环境累积奖励: 0.8926, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:48,070 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=1.0072, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:48,070 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 237, 此环境累积奖励: 1.0072, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:48,091 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8984, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:48,091 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 238, 此环境累积奖励: 0.8984, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:48,237 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9353, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:48,237 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 239, 此环境累积奖励: 0.9353, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:48,244 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8454, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:48,244 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 240, 环境贡献: {0: 120, 1: 120}, 原因统计: {'技能周期结束': 240, '环境终止': 0}
2025-05-24 01:06:48,244 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 240, 此环境累积奖励: 0.8454, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:48,390 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9519, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:48,390 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 241, 此环境累积奖励: 0.9519, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:48,390 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9292, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:48,390 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 242, 此环境累积奖励: 0.9292, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:48,536 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9310, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:48,536 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 243, 此环境累积奖励: 0.9310, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:48,536 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8302, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:48,536 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 244, 此环境累积奖励: 0.8302, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:48,686 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7571, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:48,686 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 245, 此环境累积奖励: 0.7571, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:48,697 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7565, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:48,697 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 246, 此环境累积奖励: 0.7565, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:48,846 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7883, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:48,846 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 247, 此环境累积奖励: 0.7883, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:48,853 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8203, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:48,853 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 248, 此环境累积奖励: 0.8203, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:49,013 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8206, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:49,013 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 249, 此环境累积奖励: 0.8206, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:49,013 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.6702, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:49,013 - [MainProcess] - HMASD - INFO - 高层经验统计 - 总样本: 250, 环境贡献: {0: 125, 1: 125}, 原因统计: {'技能周期结束': 250, '环境终止': 0}
2025-05-24 01:06:49,013 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 250, 此环境累积奖励: 0.6702, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:49,179 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8551, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:49,179 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 251, 此环境累积奖励: 0.8551, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:49,186 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7547, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:49,186 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 252, 此环境累积奖励: 0.7547, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:49,339 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7445, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:49,339 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 253, 此环境累积奖励: 0.7445, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:49,347 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7568, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:49,347 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 254, 此环境累积奖励: 0.7568, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:49,522 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7705, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:49,522 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=9, total_steps=9, 当前缓冲区大小: 255, 此环境累积奖励: 0.7705, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:49,526 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8604, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=0步, k=5
2025-05-24 01:06:49,526 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=9, total_steps=9, 当前缓冲区大小: 256, 此环境累积奖励: 0.8604, 成功添加：True, 原因：技能周期结束
2025-05-24 01:06:49,529 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 256/32 (当前/所需)
2025-05-24 01:06:49,529 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从256个样本中采样32个
2025-05-24 01:06:49,530 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=0.8891, 标准差=0.2221, 最小值=0.5223, 最大值=1.3681
2025-05-24 01:06:49,533 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:06:49,534 - [MainProcess] - HMASD - INFO -   rewards: 均值=0.8891, 标准差=0.2221, 最小值=0.5223, 最大值=1.3681
2025-05-24 01:06:49,534 - [MainProcess] - HMASD - INFO -   state_values: 均值=1.6031, 标准差=0.1427, 最小值=1.3445, 最大值=1.8649
2025-05-24 01:06:49,541 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:06:49,541 - [MainProcess] - HMASD - INFO -   Advantages: 均值=7.6821, 标准差=4.1767, 最小值=-1.1838, 最大值=12.5330
2025-05-24 01:06:49,542 - [MainProcess] - HMASD - INFO -   Returns: 均值=9.2852, 标准差=4.1848, 最小值=0.5223, 最大值=14.1805
2025-05-24 01:06:49,569 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6804
2025-05-24 01:06:49,574 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=170.655577, 策略损失=0.066871, 价值损失=170.590057, 熵损失=-0.001352
2025-05-24 01:06:49,608 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013AD0EAE320>
2025-05-24 01:06:49,608 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:06:49,653 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=201.421997, 均值=8.375133, 标准差=17.380063, 最大=114.662270, 最小=0.002610
2025-05-24 01:06:49,676 - [MainProcess] - HMASD - WARNING - 检测到21个参数具有较大梯度 (>10.0):
2025-05-24 01:06:49,676 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 25.796717
2025-05-24 01:06:49,677 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 34.863075
2025-05-24 01:06:49,677 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 16.261921
2025-05-24 01:06:49,677 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 37.383862
2025-05-24 01:06:49,677 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.1.self_attn.in_proj_weight: 梯度范数 = 20.606340
2025-05-24 01:06:49,677 - [MainProcess] - HMASD - WARNING -   ... 还有16个参数有较大梯度
2025-05-24 01:06:49,691 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.020790, 标准差=0.043143, 最大=0.284632, 最小=0.000006
2025-05-24 01:06:49,721 - [MainProcess] - Test-Training - INFO - 更新 10, 总步数 1280, 高层损失: 170.6556
2025-05-24 01:06:49,870 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7792, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:49,870 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.7792, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:49,886 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8592, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:49,886 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8592, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,020 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7765, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,020 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.7765, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,020 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0285, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,020 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 1.0285, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,153 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8103, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,153 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8103, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,153 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8448, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,169 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8448, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,305 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8668, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,305 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8668, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,309 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9763, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,309 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.9763, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,438 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8834, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,438 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8834, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,438 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0531, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,438 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 1.0531, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,580 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8317, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,580 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8317, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,583 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8724, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,583 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8724, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,722 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8287, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,722 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8287, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,722 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8979, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,722 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8979, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,863 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8617, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,863 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8617, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:50,869 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9795, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:50,869 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.9795, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:51,013 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9034, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:51,013 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.9034, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:51,020 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9865, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:51,020 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.9865, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:51,156 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8198, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:51,156 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8198, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:51,158 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8049, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:51,158 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8049, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:51,297 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7931, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:51,297 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.7931, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:51,300 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7845, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:51,300 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.7845, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:51,429 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8095, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:51,429 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8095, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:51,436 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8114, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=1步, k=5
2025-05-24 01:06:51,440 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=10, total_steps=10, 当前缓冲区大小: 256, 此环境累积奖励: 0.8114, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:51,520 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 256/32 (当前/所需)
2025-05-24 01:06:51,520 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从256个样本中采样32个
2025-05-24 01:06:51,520 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=0.8459, 标准差=0.1803, 最小值=0.5043, 最大值=1.3222
2025-05-24 01:06:51,520 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:06:51,520 - [MainProcess] - HMASD - INFO -   rewards: 均值=0.8459, 标准差=0.1803, 最小值=0.5043, 最大值=1.3222
2025-05-24 01:06:51,520 - [MainProcess] - HMASD - INFO -   state_values: 均值=1.6907, 标准差=0.1665, 最小值=1.2993, 最大值=1.9865
2025-05-24 01:06:51,531 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:06:51,531 - [MainProcess] - HMASD - INFO -   Advantages: 均值=7.5101, 标准差=3.4020, 最小值=-0.5062, 最大值=11.3360
2025-05-24 01:06:51,531 - [MainProcess] - HMASD - INFO -   Returns: 均值=9.2009, 标准差=3.3908, 最小值=1.2115, 最大值=12.9173
2025-05-24 01:06:51,553 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6766
2025-05-24 01:06:51,558 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=153.444639, 策略损失=0.022623, 价值损失=153.423370, 熵损失=-0.001354
2025-05-24 01:06:51,583 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013AD0EAF5B0>
2025-05-24 01:06:51,591 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:06:51,624 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=197.942535, 均值=8.211161, 标准差=17.089118, 最大=113.297104, 最小=0.008833
2025-05-24 01:06:51,639 - [MainProcess] - HMASD - WARNING - 检测到21个参数具有较大梯度 (>10.0):
2025-05-24 01:06:51,639 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 25.836950
2025-05-24 01:06:51,639 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 33.932011
2025-05-24 01:06:51,639 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 16.120461
2025-05-24 01:06:51,639 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 36.406002
2025-05-24 01:06:51,639 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.1.self_attn.in_proj_weight: 梯度范数 = 20.021006
2025-05-24 01:06:51,639 - [MainProcess] - HMASD - WARNING -   ... 还有16个参数有较大梯度
2025-05-24 01:06:51,654 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.020741, 标准差=0.043167, 最大=0.286187, 最小=0.000022
2025-05-24 01:06:51,731 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6300, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:51,731 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.6300, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:51,735 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8212, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:51,735 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.8212, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:51,879 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5567, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:51,879 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.5567, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:51,879 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.7310, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:51,879 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.7310, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,013 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6732, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,013 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.6732, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,022 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8877, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,022 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.8877, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,153 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6647, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,153 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.6647, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,153 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8147, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,153 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.8147, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,286 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5106, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,286 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.5106, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,298 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9168, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,298 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.9168, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,429 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7094, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,429 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.7094, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,429 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8838, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,429 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.8838, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,563 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8207, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,563 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.8207, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,570 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8379, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,570 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.8379, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,710 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6032, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,711 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.6032, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,716 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9479, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,716 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.9479, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,846 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5803, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,846 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.5803, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,853 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9671, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,853 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.9671, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,940 - [MainProcess] - Test-Training - INFO - 进度: 1500/10000 步 (15.0%), 用时: 147.7s
2025-05-24 01:06:52,992 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8572, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,992 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.8572, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:52,995 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8431, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:52,995 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.8431, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:53,153 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7900, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:53,153 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.7900, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:53,153 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0434, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:53,153 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 1.0434, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:53,296 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7543, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:53,297 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.7543, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:53,303 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0660, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:53,303 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 1.0660, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:53,449 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7894, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:53,449 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.7894, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:53,453 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9977, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=2步, k=5
2025-05-24 01:06:53,453 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=11, total_steps=11, 当前缓冲区大小: 256, 此环境累积奖励: 0.9977, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:53,521 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 256/32 (当前/所需)
2025-05-24 01:06:53,521 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从256个样本中采样32个
2025-05-24 01:06:53,521 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=0.8139, 标准差=0.1587, 最小值=0.5372, 最大值=1.1423
2025-05-24 01:06:53,524 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:06:53,524 - [MainProcess] - HMASD - INFO -   rewards: 均值=0.8139, 标准差=0.1587, 最小值=0.5372, 最大值=1.1423
2025-05-24 01:06:53,524 - [MainProcess] - HMASD - INFO -   state_values: 均值=1.8005, 标准差=0.1871, 最小值=1.3933, 最大值=2.2425
2025-05-24 01:06:53,528 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:06:53,529 - [MainProcess] - HMASD - INFO -   Advantages: 均值=7.0121, 标准差=3.5498, 最小值=-0.8283, 最大值=11.2871
2025-05-24 01:06:53,529 - [MainProcess] - HMASD - INFO -   Returns: 均值=8.8126, 标准差=3.5995, 最小值=0.7705, 最大值=12.9535
2025-05-24 01:06:53,541 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6750
2025-05-24 01:06:53,555 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=141.392284, 策略损失=0.026146, 价值损失=141.367493, 熵损失=-0.001355
2025-05-24 01:06:53,576 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013AD0EAEEC0>
2025-05-24 01:06:53,591 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:06:53,625 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=183.900879, 均值=7.619063, 标准差=15.881465, 最大=105.730637, 最小=0.010295
2025-05-24 01:06:53,625 - [MainProcess] - HMASD - WARNING - 检测到21个参数具有较大梯度 (>10.0):
2025-05-24 01:06:53,625 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 23.505989
2025-05-24 01:06:53,625 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 30.423319
2025-05-24 01:06:53,625 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 14.957067
2025-05-24 01:06:53,625 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 33.974621
2025-05-24 01:06:53,635 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.1.self_attn.in_proj_weight: 梯度范数 = 18.259323
2025-05-24 01:06:53,635 - [MainProcess] - HMASD - WARNING -   ... 还有16个参数有较大梯度
2025-05-24 01:06:53,641 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.020715, 标准差=0.043179, 最大=0.287466, 最小=0.000028
2025-05-24 01:06:53,746 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7219, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:53,746 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.7219, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:53,753 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8901, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:53,753 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.8901, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:53,879 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7743, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:53,879 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.7743, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:53,887 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9590, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:53,887 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.9590, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,030 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8569, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,030 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.8569, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,030 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9955, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,030 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.9955, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,172 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8829, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,172 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.8829, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,172 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9594, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,172 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.9594, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,313 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8444, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,313 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.8444, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,316 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9000, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,317 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.9000, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,453 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8029, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,453 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.8029, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,453 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9689, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,453 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.9689, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,587 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8440, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,587 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.8440, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,596 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9784, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,596 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.9784, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,730 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7812, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,730 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.7812, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,736 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9394, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,736 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.9394, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,874 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6954, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,874 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.6954, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:54,882 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0389, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:54,882 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 1.0389, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:55,020 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7205, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:55,020 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.7205, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:55,020 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9291, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:55,020 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.9291, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:55,163 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6063, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:55,163 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.6063, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:55,169 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9816, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:55,169 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.9816, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:55,309 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6797, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:55,309 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.6797, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:55,313 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9564, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:55,313 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.9564, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:55,442 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8729, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:55,442 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.8729, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:55,454 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9803, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=3步, k=5
2025-05-24 01:06:55,454 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=12, total_steps=12, 当前缓冲区大小: 256, 此环境累积奖励: 0.9803, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:55,487 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 256/32 (当前/所需)
2025-05-24 01:06:55,487 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从256个样本中采样32个
2025-05-24 01:06:55,503 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=0.8292, 标准差=0.1636, 最小值=0.5795, 最大值=1.2199
2025-05-24 01:06:55,506 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:06:55,507 - [MainProcess] - HMASD - INFO -   rewards: 均值=0.8292, 标准差=0.1636, 最小值=0.5795, 最大值=1.2199
2025-05-24 01:06:55,507 - [MainProcess] - HMASD - INFO -   state_values: 均值=1.9013, 标准差=0.1261, 最小值=1.6710, 最大值=2.1919
2025-05-24 01:06:55,512 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:06:55,513 - [MainProcess] - HMASD - INFO -   Advantages: 均值=7.0937, 标准差=3.5494, 最小值=-0.7526, 最大值=11.3898
2025-05-24 01:06:55,513 - [MainProcess] - HMASD - INFO -   Returns: 均值=8.9950, 标准差=3.5330, 最小值=1.2199, 最大值=13.1097
2025-05-24 01:06:55,536 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6799
2025-05-24 01:06:55,542 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=144.004249, 策略损失=0.133477, 价值损失=143.872131, 熵损失=-0.001360
2025-05-24 01:06:55,568 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013AD0EAE1A0>
2025-05-24 01:06:55,579 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:06:55,617 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=183.715286, 均值=7.626220, 标准差=15.858302, 最大=106.482529, 最小=0.000214
2025-05-24 01:06:55,627 - [MainProcess] - HMASD - WARNING - 检测到21个参数具有较大梯度 (>10.0):
2025-05-24 01:06:55,627 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 23.011232
2025-05-24 01:06:55,627 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 29.377468
2025-05-24 01:06:55,627 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 15.027996
2025-05-24 01:06:55,627 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 33.803833
2025-05-24 01:06:55,627 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.1.self_attn.in_proj_weight: 梯度范数 = 17.376247
2025-05-24 01:06:55,628 - [MainProcess] - HMASD - WARNING -   ... 还有16个参数有较大梯度
2025-05-24 01:06:55,641 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.020756, 标准差=0.043160, 最大=0.289803, 最小=0.000001
2025-05-24 01:06:55,753 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9211, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:55,753 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.9211, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:55,753 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0581, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:55,753 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 1.0581, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:55,898 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7913, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:55,898 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.7913, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:55,903 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9833, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:55,903 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.9833, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,043 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7772, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,043 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.7772, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,043 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9471, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,043 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.9471, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,172 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5608, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,172 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.5608, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,172 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8515, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,172 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.8515, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,320 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6694, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,320 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.6694, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,320 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9577, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,320 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.9577, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,454 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6990, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,454 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.6990, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,454 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0253, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,454 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 1.0253, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,586 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7582, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,586 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.7582, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,599 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9919, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,599 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.9919, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,740 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7274, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,740 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.7274, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,746 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9985, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,746 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.9985, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,870 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.5884, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,870 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.5884, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:56,879 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.8900, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:56,879 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.8900, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:57,008 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.4941, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:57,008 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.4941, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:57,013 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9723, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:57,013 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.9723, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:57,146 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.6443, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:57,146 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.6443, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:57,153 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0130, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:57,153 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 1.0130, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:57,286 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9110, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:57,286 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.9110, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:57,286 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.1887, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:57,286 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 1.1887, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:57,420 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.8455, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:57,420 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 0.8455, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:57,420 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0120, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=4步, k=5
2025-05-24 01:06:57,420 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=13, total_steps=13, 当前缓冲区大小: 256, 此环境累积奖励: 1.0120, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:57,453 - [MainProcess] - HMASD - INFO - 高层缓冲区状态: 256/32 (当前/所需)
2025-05-24 01:06:57,453 - [MainProcess] - HMASD - INFO - 高层缓冲区满足更新条件，从256个样本中采样32个
2025-05-24 01:06:57,455 - [MainProcess] - HMASD - INFO - 高层奖励统计: 均值=0.8440, 标准差=0.1498, 最小值=0.6032, 最大值=1.2199
2025-05-24 01:06:57,458 - [MainProcess] - HMASD - INFO - GAE输入统计:
2025-05-24 01:06:57,458 - [MainProcess] - HMASD - INFO -   rewards: 均值=0.8440, 标准差=0.1498, 最小值=0.6032, 最大值=1.2199
2025-05-24 01:06:57,458 - [MainProcess] - HMASD - INFO -   state_values: 均值=2.0097, 标准差=0.1439, 最小值=1.7354, 最大值=2.3334
2025-05-24 01:06:57,463 - [MainProcess] - HMASD - INFO - GAE输出统计:
2025-05-24 01:06:57,463 - [MainProcess] - HMASD - INFO -   Advantages: 均值=6.9550, 标准差=3.7976, 最小值=-1.0945, 最大值=12.0939
2025-05-24 01:06:57,463 - [MainProcess] - HMASD - INFO -   Returns: 均值=8.9647, 标准差=3.8070, 最小值=0.7845, 最大值=13.8588
2025-05-24 01:06:57,487 - [MainProcess] - HMASD - INFO - 团队技能熵: 0.6838
2025-05-24 01:06:57,492 - [MainProcess] - HMASD - INFO - 损失统计: 总损失=144.329680, 策略损失=0.047886, 价值损失=144.283157, 熵损失=-0.001363
2025-05-24 01:06:57,515 - [MainProcess] - HMASD - INFO - 损失连接状态: requires_grad=True, grad_fn=<AddBackward0 object at 0x0000013AD0EAF0A0>
2025-05-24 01:06:57,525 - [MainProcess] - HMASD - INFO - Coordinator中需要梯度的参数数量: 109
2025-05-24 01:06:57,559 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪前): 总范数=178.741364, 均值=7.369884, 标准差=15.452833, 最大=104.750305, 最小=0.006697
2025-05-24 01:06:57,571 - [MainProcess] - HMASD - WARNING - 检测到21个参数具有较大梯度 (>10.0):
2025-05-24 01:06:57,571 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.in_proj_weight: 梯度范数 = 22.777390
2025-05-24 01:06:57,571 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.self_attn.out_proj.weight: 梯度范数 = 30.244511
2025-05-24 01:06:57,571 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear1.weight: 梯度范数 = 14.681006
2025-05-24 01:06:57,571 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.0.linear2.weight: 梯度范数 = 31.929510
2025-05-24 01:06:57,581 - [MainProcess] - HMASD - WARNING -   参数 state_encoder.transformer_encoder.layers.1.self_attn.in_proj_weight: 梯度范数 = 16.323538
2025-05-24 01:06:57,581 - [MainProcess] - HMASD - WARNING -   ... 还有16个参数有较大梯度
2025-05-24 01:06:57,592 - [MainProcess] - HMASD - INFO - 梯度统计 (裁剪后): 总范数=0.500000, 均值=0.020616, 标准差=0.043227, 最大=0.293022, 最小=0.000019
2025-05-24 01:06:57,720 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.9104, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=5步, k=5
2025-05-24 01:06:57,720 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=14, total_steps=14, 当前缓冲区大小: 256, 此环境累积奖励: 0.9104, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:57,737 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0536, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=5步, k=5
2025-05-24 01:06:57,737 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=14, total_steps=14, 当前缓冲区大小: 256, 此环境累积奖励: 1.0536, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:57,873 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7738, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=5步, k=5
2025-05-24 01:06:57,873 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=14, total_steps=14, 当前缓冲区大小: 256, 此环境累积奖励: 0.7738, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:57,873 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=1.0453, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=5步, k=5
2025-05-24 01:06:57,873 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=14, total_steps=14, 当前缓冲区大小: 256, 此环境累积奖励: 1.0453, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:58,019 - [MainProcess] - HMASD - INFO - 环境ID=0技能周期结束检查: 累积奖励=0.7843, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=5步, k=5
2025-05-24 01:06:58,019 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=0, step=14, total_steps=14, 当前缓冲区大小: 256, 此环境累积奖励: 0.7843, 成功添加：False, 原因：技能周期结束
2025-05-24 01:06:58,023 - [MainProcess] - HMASD - INFO - 环境ID=1技能周期结束检查: 累积奖励=0.9902, 之前的阈值=0.0000, 是否存储=True, 离上次贡献=5步, k=5
2025-05-24 01:06:58,023 - [MainProcess] - HMASD - INFO - 向高层缓冲区添加经验：环境ID=1, step=14, total_steps=14, 当前缓冲区大小: 256, 此环境累积奖励: 0.9902, 成功添加：False, 原因：技能周期结束
